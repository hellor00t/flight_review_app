{"ast":null,"code":"function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\nimport React, { useCallback, useState, useEffect, Fragment, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport tabbable from 'tabbable';\nimport { EuiI18n } from '../i18n';\nimport { EuiDataGridHeaderRow } from './data_grid_header_row';\nimport { EuiButtonEmpty } from '../button';\nimport { keys, htmlIdGenerator } from '../../services';\nimport { EuiDataGridBody } from './data_grid_body';\nimport { useColumnSelector } from './column_selector';\nimport { useStyleSelector, startingStyles } from './style_selector';\nimport { EuiTablePagination } from '../table/table_pagination';\nimport { EuiFocusTrap } from '../focus_trap';\nimport { EuiResizeObserver } from '../observer/resize_observer';\nimport { EuiDataGridInMemoryRenderer } from './data_grid_inmemory_renderer';\nimport { useMergedSchema, useDetectSchema, schemaDetectors as providedSchemaDetectors } from './data_grid_schema';\nimport { useColumnSorting } from './column_sorting';\nimport { EuiMutationObserver } from '../observer/mutation_observer';\nimport { DataGridContext } from './data_grid_context';\nimport { useResizeObserver } from '../observer/resize_observer/resize_observer'; // Used to short-circuit some async browser behaviour that is difficult to account for in tests\n\nvar IS_JEST_ENVIRONMENT = global.hasOwnProperty('_isJest'); // When below this number the grid only shows the full screen button\n\nvar MINIMUM_WIDTH_FOR_GRID_CONTROLS = 479; // Each gridStyle object above sets a specific CSS select to .euiGrid\n\nvar fontSizesToClassMap = {\n  s: 'euiDataGrid--fontSizeSmall',\n  m: '',\n  l: 'euiDataGrid--fontSizeLarge'\n};\nvar headerToClassMap = {\n  shade: 'euiDataGrid--headerShade',\n  underline: 'euiDataGrid--headerUnderline'\n};\nvar rowHoverToClassMap = {\n  highlight: 'euiDataGrid--rowHoverHighlight',\n  none: ''\n};\nvar bordersToClassMap = {\n  all: 'euiDataGrid--bordersAll',\n  horizontal: 'euiDataGrid--bordersHorizontal',\n  none: 'euiDataGrid--bordersNone'\n};\nvar cellPaddingsToClassMap = {\n  s: 'euiDataGrid--paddingSmall',\n  m: '',\n  l: 'euiDataGrid--paddingLarge'\n};\n\nfunction computeVisibleRows(props) {\n  var pagination = props.pagination,\n      rowCount = props.rowCount;\n  var startRow = pagination ? pagination.pageIndex * pagination.pageSize : 0;\n  var endRow = pagination ? (pagination.pageIndex + 1) * pagination.pageSize : rowCount;\n  endRow = Math.min(endRow, rowCount);\n  return endRow - startRow;\n}\n\nfunction renderPagination(props, controls) {\n  var pagination = props.pagination;\n\n  if (pagination == null) {\n    return null;\n  }\n\n  var pageIndex = pagination.pageIndex,\n      pageSize = pagination.pageSize,\n      pageSizeOptions = pagination.pageSizeOptions,\n      onChangePage = pagination.onChangePage,\n      onChangeItemsPerPage = pagination.onChangeItemsPerPage;\n  var pageCount = Math.ceil(props.rowCount / pageSize);\n\n  var minSizeOption = pageSizeOptions && _toConsumableArray(pageSizeOptions).sort(function (a, b) {\n    return a - b;\n  })[0];\n\n  if (props.rowCount < (minSizeOption || pageSize)) {\n    /**\n     * Do not render the pagination when:\n     * 1. Rows count is less than min pagination option (rows per page)\n     * 2. Rows count is less than pageSize (the case when there are no pageSizeOptions provided)\n     */\n    return null;\n  } // hide select rows per page if pageSizeOptions is undefined or an empty array\n\n\n  var hidePerPageOptions = !pageSizeOptions || pageSizeOptions.length === 0;\n  return React.createElement(EuiI18n, {\n    token: \"euiDataGrid.ariaLabelGridPagination\",\n    default: \"Pagination for preceding grid: {label}\",\n    values: {\n      label: props['aria-label']\n    }\n  }, function (ariaLabelGridPagination) {\n    return React.createElement(EuiI18n, {\n      token: \"euiDataGrid.ariaLabelledByGridPagination\",\n      default: \"Pagination for preceding grid\"\n    }, function (ariaLabelledByGridPagination) {\n      var accessibleName = _objectSpread({}, props['aria-label'] && {\n        'aria-label': ariaLabelGridPagination\n      }, {}, props['aria-labelledby'] && {\n        'aria-labelledby': ariaLabelledByGridPagination\n      });\n\n      return React.createElement(\"div\", {\n        className: \"euiDataGrid__pagination\"\n      }, React.createElement(EuiTablePagination, _extends({\n        \"aria-controls\": controls,\n        activePage: pageIndex,\n        hidePerPageOptions: hidePerPageOptions,\n        itemsPerPage: pageSize,\n        itemsPerPageOptions: pageSizeOptions,\n        pageCount: pageCount,\n        onChangePage: onChangePage,\n        onChangeItemsPerPage: onChangeItemsPerPage\n      }, accessibleName)));\n    });\n  });\n}\n\nfunction useDefaultColumnWidth(container, leadingControlColumns, trailingControlColumns, columns) {\n  var containerSize = useResizeObserver(container, 'width');\n  var gridWidth = containerSize.width;\n  var computeDefaultWidth = useCallback(function () {\n    if (IS_JEST_ENVIRONMENT) return 100;\n    if (gridWidth === 0) return null; // we can't tell what size to compute yet\n\n    var controlColumnWidths = [].concat(_toConsumableArray(leadingControlColumns), _toConsumableArray(trailingControlColumns)).reduce(function (claimedWidth, controlColumn) {\n      return claimedWidth + controlColumn.width;\n    }, 0);\n    var columnsWithWidths = columns.filter(doesColumnHaveAnInitialWidth);\n    var definedColumnsWidth = columnsWithWidths.reduce(function (claimedWidth, column) {\n      return claimedWidth + column.initialWidth;\n    }, 0);\n    var claimedWidth = controlColumnWidths + definedColumnsWidth;\n    var widthToFill = gridWidth - claimedWidth;\n    var unsizedColumnCount = columns.length - columnsWithWidths.length;\n\n    if (unsizedColumnCount === 0) {\n      return 100;\n    }\n\n    return Math.max(widthToFill / unsizedColumnCount, 100);\n  }, [gridWidth, columns, leadingControlColumns, trailingControlColumns]);\n\n  var _useState = useState(computeDefaultWidth),\n      _useState2 = _slicedToArray(_useState, 2),\n      defaultColumnWidth = _useState2[0],\n      setDefaultColumnWidth = _useState2[1];\n\n  useEffect(function () {\n    var columnWidth = computeDefaultWidth();\n    setDefaultColumnWidth(columnWidth);\n  }, [computeDefaultWidth]);\n  return defaultColumnWidth;\n}\n\nfunction doesColumnHaveAnInitialWidth(column) {\n  return column.hasOwnProperty('initialWidth');\n}\n\nfunction useColumnWidths(columns, onColumnResize) {\n  var hasMounted = useRef(false);\n  var computeColumnWidths = useCallback(function () {\n    return columns.filter(doesColumnHaveAnInitialWidth).reduce(function (initialWidths, column) {\n      initialWidths[column.id] = column.initialWidth;\n      return initialWidths;\n    }, {});\n  }, [columns]);\n\n  var _useState3 = useState(computeColumnWidths),\n      _useState4 = _slicedToArray(_useState3, 2),\n      columnWidths = _useState4[0],\n      setColumnWidths = _useState4[1];\n\n  useEffect(function () {\n    if (!hasMounted.current) {\n      hasMounted.current = true;\n      return;\n    }\n\n    setColumnWidths(computeColumnWidths());\n  }, [computeColumnWidths]);\n\n  var setColumnWidth = function setColumnWidth(columnId, width) {\n    setColumnWidths(_objectSpread({}, columnWidths, _defineProperty({}, columnId, width)));\n\n    if (onColumnResize) {\n      onColumnResize({\n        columnId: columnId,\n        width: width\n      });\n    }\n  };\n\n  return [columnWidths, setColumnWidth];\n}\n\nfunction useOnResize(setHasRoomForGridControls, isFullScreen, minSizeForControls) {\n  return useCallback(function (_ref) {\n    var width = _ref.width;\n    setHasRoomForGridControls(width > minSizeForControls || isFullScreen);\n  }, [setHasRoomForGridControls, isFullScreen, minSizeForControls]);\n}\n\nfunction useInMemoryValues(inMemory, rowCount) {\n  /**\n   * For performance, `onCellRender` below mutates the inMemoryValues object\n   * instead of cloning. If this operation were done in a setState call\n   * React would ignore the update as the object itself has not changed.\n   * So, we keep a dual record: the in-memory values themselves and a \"version\" counter.\n   * When the object is mutated, the version is incremented triggering a re-render, and\n   * the returned `inMemoryValues` object is re-created (cloned) from the mutated version.\n   * The version updates are batched, so only one clone happens per batch.\n   **/\n  var _inMemoryValues = useRef({});\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      inMemoryValuesVersion = _useState6[0],\n      setInMemoryValuesVersion = _useState6[1]; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  var inMemoryValues = useMemo(function () {\n    return _objectSpread({}, _inMemoryValues.current);\n  }, [inMemoryValuesVersion]);\n  var onCellRender = useCallback(function (rowIndex, columnId, value) {\n    var nextInMemoryValues = _inMemoryValues.current;\n    nextInMemoryValues[rowIndex] = nextInMemoryValues[rowIndex] || {};\n    nextInMemoryValues[rowIndex][columnId] = value;\n    setInMemoryValuesVersion(function (version) {\n      return version + 1;\n    });\n  }, []); // if `inMemory.level` or `rowCount` changes reset the values\n\n  var inMemoryLevel = inMemory && inMemory.level;\n  var resetRunCount = useRef(0);\n  useEffect(function () {\n    if (resetRunCount.current++ > 0) {\n      // this has to delete \"overflow\" keys from the object instead of resetting to an empty one,\n      // as the internal inmemoryrenderer component's useEffect which sets the values\n      // exectues before this outer, wrapping useEffect\n      var existingRowKeyCount = Object.keys(_inMemoryValues.current).length;\n\n      for (var i = rowCount; i < existingRowKeyCount; i++) {\n        delete _inMemoryValues.current[i];\n      }\n\n      setInMemoryValuesVersion(function (version) {\n        return version + 1;\n      });\n    }\n  }, [inMemoryLevel, rowCount]);\n  return [inMemoryValues, onCellRender];\n}\n\nfunction createKeyDownHandler(props, visibleColumns, leadingControlColumns, trailingControlColumns, focusedCell, headerIsInteractive, setFocusedCell, updateFocus) {\n  return function (event) {\n    if (focusedCell == null) return;\n    var colCount = visibleColumns.length + leadingControlColumns.length + trailingControlColumns.length - 1;\n\n    var _focusedCell = _slicedToArray(focusedCell, 2),\n        x = _focusedCell[0],\n        y = _focusedCell[1];\n\n    var rowCount = computeVisibleRows(props);\n    var key = event.key,\n        ctrlKey = event.ctrlKey;\n\n    if (key === keys.ARROW_DOWN) {\n      event.preventDefault();\n\n      if (y < rowCount - 1) {\n        setFocusedCell([x, y + 1]);\n      }\n    } else if (key === keys.ARROW_LEFT) {\n      event.preventDefault();\n\n      if (x > 0) {\n        setFocusedCell([x - 1, y]);\n      }\n    } else if (key === keys.ARROW_UP) {\n      event.preventDefault();\n      var minimumIndex = headerIsInteractive ? -1 : 0;\n\n      if (y > minimumIndex) {\n        setFocusedCell([x, y - 1]);\n      }\n    } else if (key === keys.ARROW_RIGHT) {\n      event.preventDefault();\n\n      if (x < colCount) {\n        setFocusedCell([x + 1, y]);\n      }\n    } else if (key === keys.PAGE_DOWN) {\n      if (props.pagination) {\n        event.preventDefault();\n        var _rowCount = props.rowCount;\n        var pageIndex = props.pagination.pageIndex;\n        var pageSize = props.pagination.pageSize;\n        var pageCount = Math.ceil(_rowCount / pageSize);\n\n        if (pageIndex < pageCount - 1) {\n          props.pagination.onChangePage(pageIndex + 1);\n        }\n\n        setFocusedCell([focusedCell[0], 0]);\n        updateFocus();\n      }\n    } else if (key === keys.PAGE_UP) {\n      if (props.pagination) {\n        event.preventDefault();\n        var _pageIndex = props.pagination.pageIndex;\n\n        if (_pageIndex > 0) {\n          props.pagination.onChangePage(_pageIndex - 1);\n        }\n\n        setFocusedCell([focusedCell[0], props.pagination.pageSize - 1]);\n        updateFocus();\n      }\n    } else if (key === (ctrlKey && keys.END)) {\n      event.preventDefault();\n      setFocusedCell([colCount, rowCount - 1]);\n    } else if (key === (ctrlKey && keys.HOME)) {\n      event.preventDefault();\n      setFocusedCell([0, 0]);\n    } else if (key === keys.END) {\n      event.preventDefault();\n      setFocusedCell([colCount, y]);\n    } else if (key === keys.HOME) {\n      event.preventDefault();\n      setFocusedCell([0, y]);\n    }\n  };\n}\n\nfunction useAfterRender(fn) {\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isSubscribed = _useState8[0],\n      setIsSubscribed = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      needsExecution = _useState10[0],\n      setNeedsExecution = _useState10[1]; // first useEffect waits for the parent & children to render & flush to dom\n\n\n  useEffect(function () {\n    if (isSubscribed) {\n      setIsSubscribed(false);\n      setNeedsExecution(true);\n    }\n  }, [isSubscribed, setIsSubscribed, setNeedsExecution]); // second useEffect allows for a new `fn` to have been created\n  // with any state updates before being called\n\n  useEffect(function () {\n    if (needsExecution) {\n      setNeedsExecution(false);\n      fn();\n    }\n  }, [needsExecution, setNeedsExecution, fn]);\n  return function () {\n    setIsSubscribed(true);\n  };\n}\n\nvar useFocus = function useFocus(headerIsInteractive) {\n  var _useState11 = useState(undefined),\n      _useState12 = _slicedToArray(_useState11, 2),\n      focusedCell = _useState12[0],\n      setFocusedCell = _useState12[1];\n\n  var hasHadFocus = useMemo(function () {\n    return focusedCell != null;\n  }, [focusedCell]);\n  var focusProps = useMemo(function () {\n    return hasHadFocus ? {\n      // FireFox allows tabbing to a div that is scrollable, while Chrome does not\n      tabIndex: -1\n    } : {\n      tabIndex: 0,\n      onFocus: function onFocus(e) {\n        // if e.target (the source element of the `focus event`\n        // matches e.currentTarget (always the div with this onFocus listener)\n        // then the user has focused directly on the data grid wrapper (almost definitely by tabbing)\n        // so shift focus to the first interactive cell within the grid\n        if (e.target === e.currentTarget) {\n          setFocusedCell(headerIsInteractive ? [0, -1] : [0, 0]);\n        }\n      }\n    };\n  }, [hasHadFocus, setFocusedCell, headerIsInteractive]);\n  return [focusProps, focusedCell, setFocusedCell];\n}; // Typeguards to see if toolbarVisibility has a certain boolean property assigned\n// If not, just set it to true and assume it's OK to show\n\n\nfunction objectHasKey(object, key) {\n  return object.hasOwnProperty(key);\n}\n\nfunction checkOrDefaultToolBarDiplayOptions(arg, option) {\n  if (arg === undefined) {\n    return true;\n  } else if (typeof arg === 'boolean') {\n    return arg;\n  } else if (objectHasKey(arg, option)) {\n    return arg[option];\n  } else {\n    return true;\n  }\n}\n\nvar emptyArrayDefault = [];\nexport var EuiDataGrid = function EuiDataGrid(props) {\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isFullScreen = _useState14[0],\n      setIsFullScreen = _useState14[1];\n\n  var _useState15 = useState(true),\n      _useState16 = _slicedToArray(_useState15, 2),\n      hasRoomForGridControls = _useState16[0],\n      setHasRoomForGridControls = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      containerRef = _useState18[0],\n      _setContainerRef = _useState18[1];\n\n  var _useState19 = useState(htmlIdGenerator()()),\n      _useState20 = _slicedToArray(_useState19, 1),\n      interactiveCellId = _useState20[0];\n\n  var _useState21 = useState(false),\n      _useState22 = _slicedToArray(_useState21, 2),\n      headerIsInteractive = _useState22[0],\n      setHeaderIsInteractive = _useState22[1];\n\n  var setContainerRef = useCallback(function (ref) {\n    return _setContainerRef(ref);\n  }, []);\n\n  var _useFocus = useFocus(headerIsInteractive),\n      _useFocus2 = _slicedToArray(_useFocus, 3),\n      wrappingDivFocusProps = _useFocus2[0],\n      focusedCell = _useFocus2[1],\n      setFocusedCell = _useFocus2[2];\n\n  var handleHeaderChange = useCallback(function (records) {\n    var _records = _slicedToArray(records, 1),\n        target = _records[0].target; // find the wrapping header div\n\n\n    var headerRow = target.parentElement;\n\n    while (headerRow && (headerRow.getAttribute('data-test-subj') || '').indexOf('dataGridHeader') === -1) {\n      headerRow = headerRow.parentElement;\n    }\n\n    if (headerRow) {\n      var tabbables = tabbable(headerRow);\n      var managed = headerRow.querySelectorAll('[data-euigrid-tab-managed]');\n      var hasInteractives = tabbables.length > 0 || managed.length > 0;\n\n      if (hasInteractives !== headerIsInteractive) {\n        setHeaderIsInteractive(hasInteractives); // if the focus is on the header, and the header is no longer interactive\n        // move the focus down to the first row\n\n        if (hasInteractives === false && focusedCell && focusedCell[1] === -1) {\n          setFocusedCell([focusedCell[0], 0]);\n        }\n      }\n    }\n  }, [headerIsInteractive, setHeaderIsInteractive, focusedCell, setFocusedCell]);\n\n  var handleGridKeyDown = function handleGridKeyDown(event) {\n    switch (event.key) {\n      case keys.ESCAPE:\n        if (isFullScreen) {\n          event.preventDefault();\n          setIsFullScreen(false);\n        }\n\n        break;\n    }\n  };\n\n  var _props$leadingControl = props.leadingControlColumns,\n      leadingControlColumns = _props$leadingControl === void 0 ? emptyArrayDefault : _props$leadingControl,\n      _props$trailingContro = props.trailingControlColumns,\n      trailingControlColumns = _props$trailingContro === void 0 ? emptyArrayDefault : _props$trailingContro,\n      columns = props.columns,\n      columnVisibility = props.columnVisibility,\n      schemaDetectors = props.schemaDetectors,\n      rowCount = props.rowCount,\n      renderCellValue = props.renderCellValue,\n      className = props.className,\n      gridStyle = props.gridStyle,\n      _props$toolbarVisibil = props.toolbarVisibility,\n      toolbarVisibility = _props$toolbarVisibil === void 0 ? true : _props$toolbarVisibil,\n      pagination = props.pagination,\n      sorting = props.sorting,\n      inMemory = props.inMemory,\n      popoverContents = props.popoverContents,\n      onColumnResize = props.onColumnResize,\n      _props$minSizeForCont = props.minSizeForControls,\n      minSizeForControls = _props$minSizeForCont === void 0 ? MINIMUM_WIDTH_FOR_GRID_CONTROLS : _props$minSizeForCont,\n      rest = _objectWithoutProperties(props, [\"leadingControlColumns\", \"trailingControlColumns\", \"columns\", \"columnVisibility\", \"schemaDetectors\", \"rowCount\", \"renderCellValue\", \"className\", \"gridStyle\", \"toolbarVisibility\", \"pagination\", \"sorting\", \"inMemory\", \"popoverContents\", \"onColumnResize\", \"minSizeForControls\"]); // enables/disables grid controls based on available width\n\n\n  var onResize = useOnResize(function (nextHasRoomForGridControls) {\n    if (nextHasRoomForGridControls !== hasRoomForGridControls) {\n      setHasRoomForGridControls(nextHasRoomForGridControls);\n    }\n  }, isFullScreen, minSizeForControls);\n\n  var _useColumnWidths = useColumnWidths(columns, onColumnResize),\n      _useColumnWidths2 = _slicedToArray(_useColumnWidths, 2),\n      columnWidths = _useColumnWidths2[0],\n      setColumnWidth = _useColumnWidths2[1]; // apply style props on top of defaults\n\n\n  var gridStyleWithDefaults = _objectSpread({}, startingStyles, {}, gridStyle);\n\n  var _useInMemoryValues = useInMemoryValues(inMemory, rowCount),\n      _useInMemoryValues2 = _slicedToArray(_useInMemoryValues, 2),\n      inMemoryValues = _useInMemoryValues2[0],\n      onCellRender = _useInMemoryValues2[1];\n\n  var definedColumnSchemas = useMemo(function () {\n    return columns.reduce(function (definedColumnSchemas, _ref2) {\n      var id = _ref2.id,\n          schema = _ref2.schema;\n\n      if (schema != null) {\n        definedColumnSchemas[id] = schema;\n      }\n\n      return definedColumnSchemas;\n    }, {});\n  }, [columns]);\n  var allSchemaDetectors = useMemo(function () {\n    return [].concat(_toConsumableArray(providedSchemaDetectors), _toConsumableArray(schemaDetectors || []));\n  }, [schemaDetectors]);\n  var detectedSchema = useDetectSchema(inMemory, inMemoryValues, allSchemaDetectors, definedColumnSchemas, inMemory != null);\n  var mergedSchema = useMergedSchema(detectedSchema, columns);\n  var displayValues = columns.reduce(function (acc, column) {\n    return _objectSpread({}, acc, _defineProperty({}, column.id, column.displayAsText || column.id));\n  }, {});\n\n  var _useColumnSelector = useColumnSelector(columns, columnVisibility, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showColumnSelector'), displayValues),\n      _useColumnSelector2 = _slicedToArray(_useColumnSelector, 2),\n      columnSelector = _useColumnSelector2[0],\n      orderedVisibleColumns = _useColumnSelector2[1];\n\n  var columnSorting = useColumnSorting(orderedVisibleColumns, sorting, mergedSchema, allSchemaDetectors, displayValues);\n\n  var _useStyleSelector = useStyleSelector(gridStyleWithDefaults),\n      _useStyleSelector2 = _slicedToArray(_useStyleSelector, 2),\n      styleSelector = _useStyleSelector2[0],\n      gridStyles = _useStyleSelector2[1]; // compute the default column width from the container's clientWidth and count of visible columns\n\n\n  var defaultColumnWidth = useDefaultColumnWidth(containerRef, leadingControlColumns, trailingControlColumns, orderedVisibleColumns);\n  var contentRef = useRef(null); // Because of a weird Chrome bug with position:sticky css items and focus, we force scrolling to the top\n  // if the item is in the first row. This prevents the cell from ever being under the sticky header.\n\n  useEffect(function () {\n    if (focusedCell !== undefined && focusedCell[1] === 0) {\n      if (contentRef.current != null) {\n        contentRef.current.scrollTop = 0;\n      }\n    }\n  }, [focusedCell]);\n  var classes = classNames('euiDataGrid', fontSizesToClassMap[gridStyles.fontSize], bordersToClassMap[gridStyles.border], headerToClassMap[gridStyles.header], rowHoverToClassMap[gridStyles.rowHover], cellPaddingsToClassMap[gridStyles.cellPadding], {\n    'euiDataGrid--stripes': gridStyles.stripes\n  }, {\n    'euiDataGrid--fullScreen': isFullScreen\n  }, {\n    'euiDataGrid--noControls': !toolbarVisibility\n  }, className);\n  var controlBtnClasses = classNames('euiDataGrid__controlBtn', {\n    'euiDataGrid__controlBtn--active': isFullScreen\n  }, className); // By default the toolbar appears\n\n  var showToolbar = !!toolbarVisibility; // These grid controls will only show when there is room. Check the resize observer callback\n  // They can also be optionally turned off individually by using toolbarVisibility\n\n  var gridControls = React.createElement(Fragment, null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'additionalControls') && typeof toolbarVisibility !== 'boolean' ? toolbarVisibility.additionalControls : null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showColumnSelector') ? columnSelector : null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showStyleSelector') ? styleSelector : null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showSortSelector') ? columnSorting : null); // When data grid is full screen, we add a class to the body to remove the extra scrollbar\n\n  if (isFullScreen) {\n    document.body.classList.add('euiDataGrid__restrictBody');\n  } else {\n    document.body.classList.remove('euiDataGrid__restrictBody');\n  }\n\n  var fullScreenSelector = React.createElement(EuiI18n, {\n    tokens: ['euiDataGrid.fullScreenButton', 'euiDataGrid.fullScreenButtonActive'],\n    defaults: ['Full screen', 'Exit full screen']\n  }, function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        fullScreenButton = _ref4[0],\n        fullScreenButtonActive = _ref4[1];\n\n    return React.createElement(EuiButtonEmpty, {\n      size: \"xs\",\n      iconType: \"fullScreen\",\n      color: \"text\",\n      className: controlBtnClasses,\n      \"data-test-subj\": \"dataGridFullScrenButton\",\n      onClick: function onClick() {\n        return setIsFullScreen(!isFullScreen);\n      }\n    }, isFullScreen ? fullScreenButtonActive : fullScreenButton);\n  });\n  var cellsUpdateFocus = useRef(new Map());\n  var focusAfterRender = useAfterRender(function () {\n    if (focusedCell) {\n      var _key = \"\".concat(focusedCell[0], \"-\").concat(focusedCell[1]);\n\n      if (cellsUpdateFocus.current.has(_key)) {\n        cellsUpdateFocus.current.get(_key)();\n      }\n    }\n  });\n  var datagridContext = useMemo(function () {\n    return {\n      onFocusUpdate: function onFocusUpdate(cell, updateFocus) {\n        if (pagination) {\n          var _key2 = \"\".concat(cell[0], \"-\").concat(cell[1]);\n\n          cellsUpdateFocus.current.set(_key2, updateFocus);\n          return function () {\n            cellsUpdateFocus.current.delete(_key2);\n          };\n        }\n      }\n    };\n  }, [pagination]);\n  var gridIds = htmlIdGenerator();\n  var gridId = gridIds();\n  var ariaLabelledById = gridIds();\n  return React.createElement(EuiI18n, {\n    token: \"euiDataGrid.ariaLabel\",\n    default: \"{label}; Page {page} of {pageCount}.\",\n    values: {\n      label: rest['aria-label'],\n      page: pagination ? pagination.pageIndex + 1 : 0,\n      pageCount: pagination ? Math.ceil(props.rowCount / pagination.pageSize) : 0\n    }\n  }, function (ariaLabel) {\n    return React.createElement(EuiI18n, {\n      token: \"euiDataGrid.ariaLabelledBy\",\n      default: \"Page {page} of {pageCount}.\",\n      values: {\n        page: pagination ? pagination.pageIndex + 1 : 0,\n        pageCount: pagination ? Math.ceil(props.rowCount / pagination.pageSize) : 0\n      }\n    }, function (ariaLabelledBy) {\n      // extract aria-label and/or aria-labelledby from `rest`\n      var gridAriaProps = {};\n\n      if ('aria-label' in rest) {\n        gridAriaProps['aria-label'] = pagination ? ariaLabel : rest['aria-label'];\n        delete rest['aria-label'];\n      }\n\n      if ('aria-labelledby' in rest) {\n        gridAriaProps['aria-labelledby'] = \"\".concat(rest['aria-labelledby'], \" \").concat(pagination ? ariaLabelledById : '');\n        delete rest['aria-labelledby'];\n      }\n\n      return React.createElement(DataGridContext.Provider, {\n        value: datagridContext\n      }, React.createElement(EuiFocusTrap, {\n        disabled: !isFullScreen,\n        style: {\n          height: '100%'\n        }\n      }, React.createElement(\"div\", {\n        className: classes,\n        onKeyDown: handleGridKeyDown,\n        ref: setContainerRef\n      }, (IS_JEST_ENVIRONMENT || defaultColumnWidth) && React.createElement(React.Fragment, null, showToolbar ? React.createElement(\"div\", {\n        className: \"euiDataGrid__controls\",\n        \"data-test-sub\": \"dataGridControls\"\n      }, hasRoomForGridControls ? gridControls : null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showFullScreenSelector') ? fullScreenSelector : null) : null, React.createElement(EuiResizeObserver, {\n        onResize: onResize\n      }, function (resizeRef) {\n        return React.createElement(\"div\", _extends({\n          onKeyDown: createKeyDownHandler(props, orderedVisibleColumns, leadingControlColumns, trailingControlColumns, focusedCell, headerIsInteractive, setFocusedCell, focusAfterRender),\n          className: \"euiDataGrid__verticalScroll\",\n          ref: resizeRef\n        }, rest), React.createElement(\"div\", {\n          className: \"euiDataGrid__overflow\"\n        }, inMemory ? React.createElement(EuiDataGridInMemoryRenderer, {\n          inMemory: inMemory,\n          renderCellValue: renderCellValue,\n          columns: columns,\n          rowCount: inMemory.level === 'enhancements' ? // if `inMemory.level === enhancements` then we can only be sure the pagination's pageSize is available in memory\n          (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) || rowCount : // otherwise, all of the data is present and usable\n          rowCount,\n          onCellRender: onCellRender\n        }) : null, React.createElement(\"div\", _extends({\n          ref: contentRef,\n          \"data-test-subj\": \"dataGridWrapper\",\n          className: \"euiDataGrid__content\",\n          role: \"grid\",\n          id: gridId\n        }, wrappingDivFocusProps, gridAriaProps), React.createElement(EuiMutationObserver, {\n          observerOptions: {\n            subtree: true,\n            childList: true\n          },\n          onMutation: handleHeaderChange\n        }, function (ref) {\n          return React.createElement(EuiDataGridHeaderRow, {\n            ref: ref,\n            leadingControlColumns: leadingControlColumns,\n            trailingControlColumns: trailingControlColumns,\n            columns: orderedVisibleColumns,\n            columnWidths: columnWidths,\n            defaultColumnWidth: defaultColumnWidth,\n            setColumnWidth: setColumnWidth,\n            schema: mergedSchema,\n            sorting: sorting,\n            headerIsInteractive: headerIsInteractive,\n            focusedCell: focusedCell,\n            setFocusedCell: setFocusedCell\n          });\n        }), React.createElement(EuiDataGridBody, {\n          columnWidths: columnWidths,\n          defaultColumnWidth: defaultColumnWidth,\n          inMemoryValues: inMemoryValues,\n          inMemory: inMemory,\n          leadingControlColumns: leadingControlColumns,\n          trailingControlColumns: trailingControlColumns,\n          columns: orderedVisibleColumns,\n          schema: mergedSchema,\n          schemaDetectors: allSchemaDetectors,\n          popoverContents: popoverContents,\n          focusedCell: focusedCell,\n          onCellFocus: setFocusedCell,\n          pagination: pagination,\n          sorting: sorting,\n          renderCellValue: renderCellValue,\n          rowCount: rowCount,\n          interactiveCellId: interactiveCellId\n        }))));\n      }), props.pagination && props['aria-labelledby'] && React.createElement(\"p\", {\n        id: ariaLabelledBy,\n        hidden: true\n      }, ariaLabelledBy), renderPagination(props, gridId), React.createElement(\"p\", {\n        id: interactiveCellId,\n        hidden: true\n      }, React.createElement(EuiI18n, {\n        token: \"euiDataGrid.screenReaderNotice\",\n        default: \"Cell contains interactive content.\"\n      }))))));\n    });\n  });\n};\nEuiDataGrid.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"EuiDataGrid\"\n};","map":{"version":3,"sources":["/Users/scott/Projects/flight_review_project/node_modules/@elastic/eui/es/components/datagrid/data_grid.js"],"names":["_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","Symbol","iterator","toString","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","err","Array","isArray","_extends","assign","arguments","hasOwnProperty","apply","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","configurable","writable","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","from","arr2","React","useCallback","useState","useEffect","Fragment","useMemo","useRef","classNames","tabbable","EuiI18n","EuiDataGridHeaderRow","EuiButtonEmpty","htmlIdGenerator","EuiDataGridBody","useColumnSelector","useStyleSelector","startingStyles","EuiTablePagination","EuiFocusTrap","EuiResizeObserver","EuiDataGridInMemoryRenderer","useMergedSchema","useDetectSchema","schemaDetectors","providedSchemaDetectors","useColumnSorting","EuiMutationObserver","DataGridContext","useResizeObserver","IS_JEST_ENVIRONMENT","global","MINIMUM_WIDTH_FOR_GRID_CONTROLS","fontSizesToClassMap","s","m","l","headerToClassMap","shade","underline","rowHoverToClassMap","highlight","none","bordersToClassMap","all","horizontal","cellPaddingsToClassMap","computeVisibleRows","props","pagination","rowCount","startRow","pageIndex","pageSize","endRow","Math","min","renderPagination","controls","pageSizeOptions","onChangePage","onChangeItemsPerPage","pageCount","ceil","minSizeOption","sort","a","b","hidePerPageOptions","createElement","token","default","values","label","ariaLabelGridPagination","ariaLabelledByGridPagination","accessibleName","className","activePage","itemsPerPage","itemsPerPageOptions","useDefaultColumnWidth","container","leadingControlColumns","trailingControlColumns","columns","containerSize","gridWidth","width","computeDefaultWidth","controlColumnWidths","concat","reduce","claimedWidth","controlColumn","columnsWithWidths","doesColumnHaveAnInitialWidth","definedColumnsWidth","column","initialWidth","widthToFill","unsizedColumnCount","max","_useState","_useState2","defaultColumnWidth","setDefaultColumnWidth","columnWidth","useColumnWidths","onColumnResize","hasMounted","computeColumnWidths","initialWidths","id","_useState3","_useState4","columnWidths","setColumnWidths","current","setColumnWidth","columnId","useOnResize","setHasRoomForGridControls","isFullScreen","minSizeForControls","_ref","useInMemoryValues","inMemory","_inMemoryValues","_useState5","_useState6","inMemoryValuesVersion","setInMemoryValuesVersion","inMemoryValues","onCellRender","rowIndex","nextInMemoryValues","version","inMemoryLevel","level","resetRunCount","existingRowKeyCount","createKeyDownHandler","visibleColumns","focusedCell","headerIsInteractive","setFocusedCell","updateFocus","event","colCount","_focusedCell","x","y","ctrlKey","ARROW_DOWN","preventDefault","ARROW_LEFT","ARROW_UP","minimumIndex","ARROW_RIGHT","PAGE_DOWN","_rowCount","PAGE_UP","_pageIndex","END","HOME","useAfterRender","fn","_useState7","_useState8","isSubscribed","setIsSubscribed","_useState9","_useState10","needsExecution","setNeedsExecution","useFocus","_useState11","_useState12","hasHadFocus","focusProps","tabIndex","onFocus","e","currentTarget","objectHasKey","checkOrDefaultToolBarDiplayOptions","arg","option","emptyArrayDefault","EuiDataGrid","_useState13","_useState14","setIsFullScreen","_useState15","_useState16","hasRoomForGridControls","_useState17","_useState18","containerRef","_setContainerRef","_useState19","_useState20","interactiveCellId","_useState21","_useState22","setHeaderIsInteractive","setContainerRef","ref","_useFocus","_useFocus2","wrappingDivFocusProps","handleHeaderChange","records","_records","headerRow","parentElement","getAttribute","tabbables","managed","querySelectorAll","hasInteractives","handleGridKeyDown","ESCAPE","_props$leadingControl","_props$trailingContro","columnVisibility","renderCellValue","gridStyle","_props$toolbarVisibil","toolbarVisibility","sorting","popoverContents","_props$minSizeForCont","rest","onResize","nextHasRoomForGridControls","_useColumnWidths","_useColumnWidths2","gridStyleWithDefaults","_useInMemoryValues","_useInMemoryValues2","definedColumnSchemas","_ref2","schema","allSchemaDetectors","detectedSchema","mergedSchema","displayValues","acc","displayAsText","_useColumnSelector","_useColumnSelector2","columnSelector","orderedVisibleColumns","columnSorting","_useStyleSelector","_useStyleSelector2","styleSelector","gridStyles","contentRef","scrollTop","classes","fontSize","border","header","rowHover","cellPadding","stripes","controlBtnClasses","showToolbar","gridControls","additionalControls","document","body","classList","add","remove","fullScreenSelector","tokens","defaults","_ref3","_ref4","fullScreenButton","fullScreenButtonActive","size","iconType","color","onClick","cellsUpdateFocus","Map","focusAfterRender","_key","has","get","datagridContext","onFocusUpdate","cell","_key2","set","delete","gridIds","gridId","ariaLabelledById","page","ariaLabel","ariaLabelledBy","gridAriaProps","Provider","disabled","style","height","onKeyDown","resizeRef","role","observerOptions","subtree","childList","onMutation","onCellFocus","hidden","__docgenInfo"],"mappings":"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","sourcesContent":["function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useState, useEffect, Fragment, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport tabbable from 'tabbable';\nimport { EuiI18n } from '../i18n';\nimport { EuiDataGridHeaderRow } from './data_grid_header_row';\nimport { EuiButtonEmpty } from '../button';\nimport { keys, htmlIdGenerator } from '../../services';\nimport { EuiDataGridBody } from './data_grid_body';\nimport { useColumnSelector } from './column_selector';\nimport { useStyleSelector, startingStyles } from './style_selector';\nimport { EuiTablePagination } from '../table/table_pagination';\nimport { EuiFocusTrap } from '../focus_trap';\nimport { EuiResizeObserver } from '../observer/resize_observer';\nimport { EuiDataGridInMemoryRenderer } from './data_grid_inmemory_renderer';\nimport { useMergedSchema, useDetectSchema, schemaDetectors as providedSchemaDetectors } from './data_grid_schema';\nimport { useColumnSorting } from './column_sorting';\nimport { EuiMutationObserver } from '../observer/mutation_observer';\nimport { DataGridContext } from './data_grid_context';\nimport { useResizeObserver } from '../observer/resize_observer/resize_observer'; // Used to short-circuit some async browser behaviour that is difficult to account for in tests\n\nvar IS_JEST_ENVIRONMENT = global.hasOwnProperty('_isJest'); // When below this number the grid only shows the full screen button\n\nvar MINIMUM_WIDTH_FOR_GRID_CONTROLS = 479;\n// Each gridStyle object above sets a specific CSS select to .euiGrid\nvar fontSizesToClassMap = {\n  s: 'euiDataGrid--fontSizeSmall',\n  m: '',\n  l: 'euiDataGrid--fontSizeLarge'\n};\nvar headerToClassMap = {\n  shade: 'euiDataGrid--headerShade',\n  underline: 'euiDataGrid--headerUnderline'\n};\nvar rowHoverToClassMap = {\n  highlight: 'euiDataGrid--rowHoverHighlight',\n  none: ''\n};\nvar bordersToClassMap = {\n  all: 'euiDataGrid--bordersAll',\n  horizontal: 'euiDataGrid--bordersHorizontal',\n  none: 'euiDataGrid--bordersNone'\n};\nvar cellPaddingsToClassMap = {\n  s: 'euiDataGrid--paddingSmall',\n  m: '',\n  l: 'euiDataGrid--paddingLarge'\n};\n\nfunction computeVisibleRows(props) {\n  var pagination = props.pagination,\n      rowCount = props.rowCount;\n  var startRow = pagination ? pagination.pageIndex * pagination.pageSize : 0;\n  var endRow = pagination ? (pagination.pageIndex + 1) * pagination.pageSize : rowCount;\n  endRow = Math.min(endRow, rowCount);\n  return endRow - startRow;\n}\n\nfunction renderPagination(props, controls) {\n  var pagination = props.pagination;\n\n  if (pagination == null) {\n    return null;\n  }\n\n  var pageIndex = pagination.pageIndex,\n      pageSize = pagination.pageSize,\n      pageSizeOptions = pagination.pageSizeOptions,\n      onChangePage = pagination.onChangePage,\n      onChangeItemsPerPage = pagination.onChangeItemsPerPage;\n  var pageCount = Math.ceil(props.rowCount / pageSize);\n\n  var minSizeOption = pageSizeOptions && _toConsumableArray(pageSizeOptions).sort(function (a, b) {\n    return a - b;\n  })[0];\n\n  if (props.rowCount < (minSizeOption || pageSize)) {\n    /**\n     * Do not render the pagination when:\n     * 1. Rows count is less than min pagination option (rows per page)\n     * 2. Rows count is less than pageSize (the case when there are no pageSizeOptions provided)\n     */\n    return null;\n  } // hide select rows per page if pageSizeOptions is undefined or an empty array\n\n\n  var hidePerPageOptions = !pageSizeOptions || pageSizeOptions.length === 0;\n  return React.createElement(EuiI18n, {\n    token: \"euiDataGrid.ariaLabelGridPagination\",\n    default: \"Pagination for preceding grid: {label}\",\n    values: {\n      label: props['aria-label']\n    }\n  }, function (ariaLabelGridPagination) {\n    return React.createElement(EuiI18n, {\n      token: \"euiDataGrid.ariaLabelledByGridPagination\",\n      default: \"Pagination for preceding grid\"\n    }, function (ariaLabelledByGridPagination) {\n      var accessibleName = _objectSpread({}, props['aria-label'] && {\n        'aria-label': ariaLabelGridPagination\n      }, {}, props['aria-labelledby'] && {\n        'aria-labelledby': ariaLabelledByGridPagination\n      });\n\n      return React.createElement(\"div\", {\n        className: \"euiDataGrid__pagination\"\n      }, React.createElement(EuiTablePagination, _extends({\n        \"aria-controls\": controls,\n        activePage: pageIndex,\n        hidePerPageOptions: hidePerPageOptions,\n        itemsPerPage: pageSize,\n        itemsPerPageOptions: pageSizeOptions,\n        pageCount: pageCount,\n        onChangePage: onChangePage,\n        onChangeItemsPerPage: onChangeItemsPerPage\n      }, accessibleName)));\n    });\n  });\n}\n\nfunction useDefaultColumnWidth(container, leadingControlColumns, trailingControlColumns, columns) {\n  var containerSize = useResizeObserver(container, 'width');\n  var gridWidth = containerSize.width;\n  var computeDefaultWidth = useCallback(function () {\n    if (IS_JEST_ENVIRONMENT) return 100;\n    if (gridWidth === 0) return null; // we can't tell what size to compute yet\n\n    var controlColumnWidths = [].concat(_toConsumableArray(leadingControlColumns), _toConsumableArray(trailingControlColumns)).reduce(function (claimedWidth, controlColumn) {\n      return claimedWidth + controlColumn.width;\n    }, 0);\n    var columnsWithWidths = columns.filter(doesColumnHaveAnInitialWidth);\n    var definedColumnsWidth = columnsWithWidths.reduce(function (claimedWidth, column) {\n      return claimedWidth + column.initialWidth;\n    }, 0);\n    var claimedWidth = controlColumnWidths + definedColumnsWidth;\n    var widthToFill = gridWidth - claimedWidth;\n    var unsizedColumnCount = columns.length - columnsWithWidths.length;\n\n    if (unsizedColumnCount === 0) {\n      return 100;\n    }\n\n    return Math.max(widthToFill / unsizedColumnCount, 100);\n  }, [gridWidth, columns, leadingControlColumns, trailingControlColumns]);\n\n  var _useState = useState(computeDefaultWidth),\n      _useState2 = _slicedToArray(_useState, 2),\n      defaultColumnWidth = _useState2[0],\n      setDefaultColumnWidth = _useState2[1];\n\n  useEffect(function () {\n    var columnWidth = computeDefaultWidth();\n    setDefaultColumnWidth(columnWidth);\n  }, [computeDefaultWidth]);\n  return defaultColumnWidth;\n}\n\nfunction doesColumnHaveAnInitialWidth(column) {\n  return column.hasOwnProperty('initialWidth');\n}\n\nfunction useColumnWidths(columns, onColumnResize) {\n  var hasMounted = useRef(false);\n  var computeColumnWidths = useCallback(function () {\n    return columns.filter(doesColumnHaveAnInitialWidth).reduce(function (initialWidths, column) {\n      initialWidths[column.id] = column.initialWidth;\n      return initialWidths;\n    }, {});\n  }, [columns]);\n\n  var _useState3 = useState(computeColumnWidths),\n      _useState4 = _slicedToArray(_useState3, 2),\n      columnWidths = _useState4[0],\n      setColumnWidths = _useState4[1];\n\n  useEffect(function () {\n    if (!hasMounted.current) {\n      hasMounted.current = true;\n      return;\n    }\n\n    setColumnWidths(computeColumnWidths());\n  }, [computeColumnWidths]);\n\n  var setColumnWidth = function setColumnWidth(columnId, width) {\n    setColumnWidths(_objectSpread({}, columnWidths, _defineProperty({}, columnId, width)));\n\n    if (onColumnResize) {\n      onColumnResize({\n        columnId: columnId,\n        width: width\n      });\n    }\n  };\n\n  return [columnWidths, setColumnWidth];\n}\n\nfunction useOnResize(setHasRoomForGridControls, isFullScreen, minSizeForControls) {\n  return useCallback(function (_ref) {\n    var width = _ref.width;\n    setHasRoomForGridControls(width > minSizeForControls || isFullScreen);\n  }, [setHasRoomForGridControls, isFullScreen, minSizeForControls]);\n}\n\nfunction useInMemoryValues(inMemory, rowCount) {\n  /**\n   * For performance, `onCellRender` below mutates the inMemoryValues object\n   * instead of cloning. If this operation were done in a setState call\n   * React would ignore the update as the object itself has not changed.\n   * So, we keep a dual record: the in-memory values themselves and a \"version\" counter.\n   * When the object is mutated, the version is incremented triggering a re-render, and\n   * the returned `inMemoryValues` object is re-created (cloned) from the mutated version.\n   * The version updates are batched, so only one clone happens per batch.\n   **/\n  var _inMemoryValues = useRef({});\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      inMemoryValuesVersion = _useState6[0],\n      setInMemoryValuesVersion = _useState6[1]; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  var inMemoryValues = useMemo(function () {\n    return _objectSpread({}, _inMemoryValues.current);\n  }, [inMemoryValuesVersion]);\n  var onCellRender = useCallback(function (rowIndex, columnId, value) {\n    var nextInMemoryValues = _inMemoryValues.current;\n    nextInMemoryValues[rowIndex] = nextInMemoryValues[rowIndex] || {};\n    nextInMemoryValues[rowIndex][columnId] = value;\n    setInMemoryValuesVersion(function (version) {\n      return version + 1;\n    });\n  }, []); // if `inMemory.level` or `rowCount` changes reset the values\n\n  var inMemoryLevel = inMemory && inMemory.level;\n  var resetRunCount = useRef(0);\n  useEffect(function () {\n    if (resetRunCount.current++ > 0) {\n      // this has to delete \"overflow\" keys from the object instead of resetting to an empty one,\n      // as the internal inmemoryrenderer component's useEffect which sets the values\n      // exectues before this outer, wrapping useEffect\n      var existingRowKeyCount = Object.keys(_inMemoryValues.current).length;\n\n      for (var i = rowCount; i < existingRowKeyCount; i++) {\n        delete _inMemoryValues.current[i];\n      }\n\n      setInMemoryValuesVersion(function (version) {\n        return version + 1;\n      });\n    }\n  }, [inMemoryLevel, rowCount]);\n  return [inMemoryValues, onCellRender];\n}\n\nfunction createKeyDownHandler(props, visibleColumns, leadingControlColumns, trailingControlColumns, focusedCell, headerIsInteractive, setFocusedCell, updateFocus) {\n  return function (event) {\n    if (focusedCell == null) return;\n    var colCount = visibleColumns.length + leadingControlColumns.length + trailingControlColumns.length - 1;\n\n    var _focusedCell = _slicedToArray(focusedCell, 2),\n        x = _focusedCell[0],\n        y = _focusedCell[1];\n\n    var rowCount = computeVisibleRows(props);\n    var key = event.key,\n        ctrlKey = event.ctrlKey;\n\n    if (key === keys.ARROW_DOWN) {\n      event.preventDefault();\n\n      if (y < rowCount - 1) {\n        setFocusedCell([x, y + 1]);\n      }\n    } else if (key === keys.ARROW_LEFT) {\n      event.preventDefault();\n\n      if (x > 0) {\n        setFocusedCell([x - 1, y]);\n      }\n    } else if (key === keys.ARROW_UP) {\n      event.preventDefault();\n      var minimumIndex = headerIsInteractive ? -1 : 0;\n\n      if (y > minimumIndex) {\n        setFocusedCell([x, y - 1]);\n      }\n    } else if (key === keys.ARROW_RIGHT) {\n      event.preventDefault();\n\n      if (x < colCount) {\n        setFocusedCell([x + 1, y]);\n      }\n    } else if (key === keys.PAGE_DOWN) {\n      if (props.pagination) {\n        event.preventDefault();\n        var _rowCount = props.rowCount;\n        var pageIndex = props.pagination.pageIndex;\n        var pageSize = props.pagination.pageSize;\n        var pageCount = Math.ceil(_rowCount / pageSize);\n\n        if (pageIndex < pageCount - 1) {\n          props.pagination.onChangePage(pageIndex + 1);\n        }\n\n        setFocusedCell([focusedCell[0], 0]);\n        updateFocus();\n      }\n    } else if (key === keys.PAGE_UP) {\n      if (props.pagination) {\n        event.preventDefault();\n        var _pageIndex = props.pagination.pageIndex;\n\n        if (_pageIndex > 0) {\n          props.pagination.onChangePage(_pageIndex - 1);\n        }\n\n        setFocusedCell([focusedCell[0], props.pagination.pageSize - 1]);\n        updateFocus();\n      }\n    } else if (key === (ctrlKey && keys.END)) {\n      event.preventDefault();\n      setFocusedCell([colCount, rowCount - 1]);\n    } else if (key === (ctrlKey && keys.HOME)) {\n      event.preventDefault();\n      setFocusedCell([0, 0]);\n    } else if (key === keys.END) {\n      event.preventDefault();\n      setFocusedCell([colCount, y]);\n    } else if (key === keys.HOME) {\n      event.preventDefault();\n      setFocusedCell([0, y]);\n    }\n  };\n}\n\nfunction useAfterRender(fn) {\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isSubscribed = _useState8[0],\n      setIsSubscribed = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      needsExecution = _useState10[0],\n      setNeedsExecution = _useState10[1]; // first useEffect waits for the parent & children to render & flush to dom\n\n\n  useEffect(function () {\n    if (isSubscribed) {\n      setIsSubscribed(false);\n      setNeedsExecution(true);\n    }\n  }, [isSubscribed, setIsSubscribed, setNeedsExecution]); // second useEffect allows for a new `fn` to have been created\n  // with any state updates before being called\n\n  useEffect(function () {\n    if (needsExecution) {\n      setNeedsExecution(false);\n      fn();\n    }\n  }, [needsExecution, setNeedsExecution, fn]);\n  return function () {\n    setIsSubscribed(true);\n  };\n}\n\nvar useFocus = function useFocus(headerIsInteractive) {\n  var _useState11 = useState(undefined),\n      _useState12 = _slicedToArray(_useState11, 2),\n      focusedCell = _useState12[0],\n      setFocusedCell = _useState12[1];\n\n  var hasHadFocus = useMemo(function () {\n    return focusedCell != null;\n  }, [focusedCell]);\n  var focusProps = useMemo(function () {\n    return hasHadFocus ? {\n      // FireFox allows tabbing to a div that is scrollable, while Chrome does not\n      tabIndex: -1\n    } : {\n      tabIndex: 0,\n      onFocus: function onFocus(e) {\n        // if e.target (the source element of the `focus event`\n        // matches e.currentTarget (always the div with this onFocus listener)\n        // then the user has focused directly on the data grid wrapper (almost definitely by tabbing)\n        // so shift focus to the first interactive cell within the grid\n        if (e.target === e.currentTarget) {\n          setFocusedCell(headerIsInteractive ? [0, -1] : [0, 0]);\n        }\n      }\n    };\n  }, [hasHadFocus, setFocusedCell, headerIsInteractive]);\n  return [focusProps, focusedCell, setFocusedCell];\n}; // Typeguards to see if toolbarVisibility has a certain boolean property assigned\n// If not, just set it to true and assume it's OK to show\n\n\nfunction objectHasKey(object, key) {\n  return object.hasOwnProperty(key);\n}\n\nfunction checkOrDefaultToolBarDiplayOptions(arg, option) {\n  if (arg === undefined) {\n    return true;\n  } else if (typeof arg === 'boolean') {\n    return arg;\n  } else if (objectHasKey(arg, option)) {\n    return arg[option];\n  } else {\n    return true;\n  }\n}\n\nvar emptyArrayDefault = [];\nexport var EuiDataGrid = function EuiDataGrid(props) {\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isFullScreen = _useState14[0],\n      setIsFullScreen = _useState14[1];\n\n  var _useState15 = useState(true),\n      _useState16 = _slicedToArray(_useState15, 2),\n      hasRoomForGridControls = _useState16[0],\n      setHasRoomForGridControls = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      containerRef = _useState18[0],\n      _setContainerRef = _useState18[1];\n\n  var _useState19 = useState(htmlIdGenerator()()),\n      _useState20 = _slicedToArray(_useState19, 1),\n      interactiveCellId = _useState20[0];\n\n  var _useState21 = useState(false),\n      _useState22 = _slicedToArray(_useState21, 2),\n      headerIsInteractive = _useState22[0],\n      setHeaderIsInteractive = _useState22[1];\n\n  var setContainerRef = useCallback(function (ref) {\n    return _setContainerRef(ref);\n  }, []);\n\n  var _useFocus = useFocus(headerIsInteractive),\n      _useFocus2 = _slicedToArray(_useFocus, 3),\n      wrappingDivFocusProps = _useFocus2[0],\n      focusedCell = _useFocus2[1],\n      setFocusedCell = _useFocus2[2];\n\n  var handleHeaderChange = useCallback(function (records) {\n    var _records = _slicedToArray(records, 1),\n        target = _records[0].target; // find the wrapping header div\n\n\n    var headerRow = target.parentElement;\n\n    while (headerRow && (headerRow.getAttribute('data-test-subj') || '').indexOf('dataGridHeader') === -1) {\n      headerRow = headerRow.parentElement;\n    }\n\n    if (headerRow) {\n      var tabbables = tabbable(headerRow);\n      var managed = headerRow.querySelectorAll('[data-euigrid-tab-managed]');\n      var hasInteractives = tabbables.length > 0 || managed.length > 0;\n\n      if (hasInteractives !== headerIsInteractive) {\n        setHeaderIsInteractive(hasInteractives); // if the focus is on the header, and the header is no longer interactive\n        // move the focus down to the first row\n\n        if (hasInteractives === false && focusedCell && focusedCell[1] === -1) {\n          setFocusedCell([focusedCell[0], 0]);\n        }\n      }\n    }\n  }, [headerIsInteractive, setHeaderIsInteractive, focusedCell, setFocusedCell]);\n\n  var handleGridKeyDown = function handleGridKeyDown(event) {\n    switch (event.key) {\n      case keys.ESCAPE:\n        if (isFullScreen) {\n          event.preventDefault();\n          setIsFullScreen(false);\n        }\n\n        break;\n    }\n  };\n\n  var _props$leadingControl = props.leadingControlColumns,\n      leadingControlColumns = _props$leadingControl === void 0 ? emptyArrayDefault : _props$leadingControl,\n      _props$trailingContro = props.trailingControlColumns,\n      trailingControlColumns = _props$trailingContro === void 0 ? emptyArrayDefault : _props$trailingContro,\n      columns = props.columns,\n      columnVisibility = props.columnVisibility,\n      schemaDetectors = props.schemaDetectors,\n      rowCount = props.rowCount,\n      renderCellValue = props.renderCellValue,\n      className = props.className,\n      gridStyle = props.gridStyle,\n      _props$toolbarVisibil = props.toolbarVisibility,\n      toolbarVisibility = _props$toolbarVisibil === void 0 ? true : _props$toolbarVisibil,\n      pagination = props.pagination,\n      sorting = props.sorting,\n      inMemory = props.inMemory,\n      popoverContents = props.popoverContents,\n      onColumnResize = props.onColumnResize,\n      _props$minSizeForCont = props.minSizeForControls,\n      minSizeForControls = _props$minSizeForCont === void 0 ? MINIMUM_WIDTH_FOR_GRID_CONTROLS : _props$minSizeForCont,\n      rest = _objectWithoutProperties(props, [\"leadingControlColumns\", \"trailingControlColumns\", \"columns\", \"columnVisibility\", \"schemaDetectors\", \"rowCount\", \"renderCellValue\", \"className\", \"gridStyle\", \"toolbarVisibility\", \"pagination\", \"sorting\", \"inMemory\", \"popoverContents\", \"onColumnResize\", \"minSizeForControls\"]); // enables/disables grid controls based on available width\n\n\n  var onResize = useOnResize(function (nextHasRoomForGridControls) {\n    if (nextHasRoomForGridControls !== hasRoomForGridControls) {\n      setHasRoomForGridControls(nextHasRoomForGridControls);\n    }\n  }, isFullScreen, minSizeForControls);\n\n  var _useColumnWidths = useColumnWidths(columns, onColumnResize),\n      _useColumnWidths2 = _slicedToArray(_useColumnWidths, 2),\n      columnWidths = _useColumnWidths2[0],\n      setColumnWidth = _useColumnWidths2[1]; // apply style props on top of defaults\n\n\n  var gridStyleWithDefaults = _objectSpread({}, startingStyles, {}, gridStyle);\n\n  var _useInMemoryValues = useInMemoryValues(inMemory, rowCount),\n      _useInMemoryValues2 = _slicedToArray(_useInMemoryValues, 2),\n      inMemoryValues = _useInMemoryValues2[0],\n      onCellRender = _useInMemoryValues2[1];\n\n  var definedColumnSchemas = useMemo(function () {\n    return columns.reduce(function (definedColumnSchemas, _ref2) {\n      var id = _ref2.id,\n          schema = _ref2.schema;\n\n      if (schema != null) {\n        definedColumnSchemas[id] = schema;\n      }\n\n      return definedColumnSchemas;\n    }, {});\n  }, [columns]);\n  var allSchemaDetectors = useMemo(function () {\n    return [].concat(_toConsumableArray(providedSchemaDetectors), _toConsumableArray(schemaDetectors || []));\n  }, [schemaDetectors]);\n  var detectedSchema = useDetectSchema(inMemory, inMemoryValues, allSchemaDetectors, definedColumnSchemas, inMemory != null);\n  var mergedSchema = useMergedSchema(detectedSchema, columns);\n  var displayValues = columns.reduce(function (acc, column) {\n    return _objectSpread({}, acc, _defineProperty({}, column.id, column.displayAsText || column.id));\n  }, {});\n\n  var _useColumnSelector = useColumnSelector(columns, columnVisibility, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showColumnSelector'), displayValues),\n      _useColumnSelector2 = _slicedToArray(_useColumnSelector, 2),\n      columnSelector = _useColumnSelector2[0],\n      orderedVisibleColumns = _useColumnSelector2[1];\n\n  var columnSorting = useColumnSorting(orderedVisibleColumns, sorting, mergedSchema, allSchemaDetectors, displayValues);\n\n  var _useStyleSelector = useStyleSelector(gridStyleWithDefaults),\n      _useStyleSelector2 = _slicedToArray(_useStyleSelector, 2),\n      styleSelector = _useStyleSelector2[0],\n      gridStyles = _useStyleSelector2[1]; // compute the default column width from the container's clientWidth and count of visible columns\n\n\n  var defaultColumnWidth = useDefaultColumnWidth(containerRef, leadingControlColumns, trailingControlColumns, orderedVisibleColumns);\n  var contentRef = useRef(null); // Because of a weird Chrome bug with position:sticky css items and focus, we force scrolling to the top\n  // if the item is in the first row. This prevents the cell from ever being under the sticky header.\n\n  useEffect(function () {\n    if (focusedCell !== undefined && focusedCell[1] === 0) {\n      if (contentRef.current != null) {\n        contentRef.current.scrollTop = 0;\n      }\n    }\n  }, [focusedCell]);\n  var classes = classNames('euiDataGrid', fontSizesToClassMap[gridStyles.fontSize], bordersToClassMap[gridStyles.border], headerToClassMap[gridStyles.header], rowHoverToClassMap[gridStyles.rowHover], cellPaddingsToClassMap[gridStyles.cellPadding], {\n    'euiDataGrid--stripes': gridStyles.stripes\n  }, {\n    'euiDataGrid--fullScreen': isFullScreen\n  }, {\n    'euiDataGrid--noControls': !toolbarVisibility\n  }, className);\n  var controlBtnClasses = classNames('euiDataGrid__controlBtn', {\n    'euiDataGrid__controlBtn--active': isFullScreen\n  }, className); // By default the toolbar appears\n\n  var showToolbar = !!toolbarVisibility; // These grid controls will only show when there is room. Check the resize observer callback\n  // They can also be optionally turned off individually by using toolbarVisibility\n\n  var gridControls = React.createElement(Fragment, null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'additionalControls') && typeof toolbarVisibility !== 'boolean' ? toolbarVisibility.additionalControls : null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showColumnSelector') ? columnSelector : null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showStyleSelector') ? styleSelector : null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showSortSelector') ? columnSorting : null); // When data grid is full screen, we add a class to the body to remove the extra scrollbar\n\n  if (isFullScreen) {\n    document.body.classList.add('euiDataGrid__restrictBody');\n  } else {\n    document.body.classList.remove('euiDataGrid__restrictBody');\n  }\n\n  var fullScreenSelector = React.createElement(EuiI18n, {\n    tokens: ['euiDataGrid.fullScreenButton', 'euiDataGrid.fullScreenButtonActive'],\n    defaults: ['Full screen', 'Exit full screen']\n  }, function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        fullScreenButton = _ref4[0],\n        fullScreenButtonActive = _ref4[1];\n\n    return React.createElement(EuiButtonEmpty, {\n      size: \"xs\",\n      iconType: \"fullScreen\",\n      color: \"text\",\n      className: controlBtnClasses,\n      \"data-test-subj\": \"dataGridFullScrenButton\",\n      onClick: function onClick() {\n        return setIsFullScreen(!isFullScreen);\n      }\n    }, isFullScreen ? fullScreenButtonActive : fullScreenButton);\n  });\n  var cellsUpdateFocus = useRef(new Map());\n  var focusAfterRender = useAfterRender(function () {\n    if (focusedCell) {\n      var _key = \"\".concat(focusedCell[0], \"-\").concat(focusedCell[1]);\n\n      if (cellsUpdateFocus.current.has(_key)) {\n        cellsUpdateFocus.current.get(_key)();\n      }\n    }\n  });\n  var datagridContext = useMemo(function () {\n    return {\n      onFocusUpdate: function onFocusUpdate(cell, updateFocus) {\n        if (pagination) {\n          var _key2 = \"\".concat(cell[0], \"-\").concat(cell[1]);\n\n          cellsUpdateFocus.current.set(_key2, updateFocus);\n          return function () {\n            cellsUpdateFocus.current.delete(_key2);\n          };\n        }\n      }\n    };\n  }, [pagination]);\n  var gridIds = htmlIdGenerator();\n  var gridId = gridIds();\n  var ariaLabelledById = gridIds();\n  return React.createElement(EuiI18n, {\n    token: \"euiDataGrid.ariaLabel\",\n    default: \"{label}; Page {page} of {pageCount}.\",\n    values: {\n      label: rest['aria-label'],\n      page: pagination ? pagination.pageIndex + 1 : 0,\n      pageCount: pagination ? Math.ceil(props.rowCount / pagination.pageSize) : 0\n    }\n  }, function (ariaLabel) {\n    return React.createElement(EuiI18n, {\n      token: \"euiDataGrid.ariaLabelledBy\",\n      default: \"Page {page} of {pageCount}.\",\n      values: {\n        page: pagination ? pagination.pageIndex + 1 : 0,\n        pageCount: pagination ? Math.ceil(props.rowCount / pagination.pageSize) : 0\n      }\n    }, function (ariaLabelledBy) {\n      // extract aria-label and/or aria-labelledby from `rest`\n      var gridAriaProps = {};\n\n      if ('aria-label' in rest) {\n        gridAriaProps['aria-label'] = pagination ? ariaLabel : rest['aria-label'];\n        delete rest['aria-label'];\n      }\n\n      if ('aria-labelledby' in rest) {\n        gridAriaProps['aria-labelledby'] = \"\".concat(rest['aria-labelledby'], \" \").concat(pagination ? ariaLabelledById : '');\n        delete rest['aria-labelledby'];\n      }\n\n      return React.createElement(DataGridContext.Provider, {\n        value: datagridContext\n      }, React.createElement(EuiFocusTrap, {\n        disabled: !isFullScreen,\n        style: {\n          height: '100%'\n        }\n      }, React.createElement(\"div\", {\n        className: classes,\n        onKeyDown: handleGridKeyDown,\n        ref: setContainerRef\n      }, (IS_JEST_ENVIRONMENT || defaultColumnWidth) && React.createElement(React.Fragment, null, showToolbar ? React.createElement(\"div\", {\n        className: \"euiDataGrid__controls\",\n        \"data-test-sub\": \"dataGridControls\"\n      }, hasRoomForGridControls ? gridControls : null, checkOrDefaultToolBarDiplayOptions(toolbarVisibility, 'showFullScreenSelector') ? fullScreenSelector : null) : null, React.createElement(EuiResizeObserver, {\n        onResize: onResize\n      }, function (resizeRef) {\n        return React.createElement(\"div\", _extends({\n          onKeyDown: createKeyDownHandler(props, orderedVisibleColumns, leadingControlColumns, trailingControlColumns, focusedCell, headerIsInteractive, setFocusedCell, focusAfterRender),\n          className: \"euiDataGrid__verticalScroll\",\n          ref: resizeRef\n        }, rest), React.createElement(\"div\", {\n          className: \"euiDataGrid__overflow\"\n        }, inMemory ? React.createElement(EuiDataGridInMemoryRenderer, {\n          inMemory: inMemory,\n          renderCellValue: renderCellValue,\n          columns: columns,\n          rowCount: inMemory.level === 'enhancements' ? // if `inMemory.level === enhancements` then we can only be sure the pagination's pageSize is available in memory\n          (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) || rowCount : // otherwise, all of the data is present and usable\n          rowCount,\n          onCellRender: onCellRender\n        }) : null, React.createElement(\"div\", _extends({\n          ref: contentRef,\n          \"data-test-subj\": \"dataGridWrapper\",\n          className: \"euiDataGrid__content\",\n          role: \"grid\",\n          id: gridId\n        }, wrappingDivFocusProps, gridAriaProps), React.createElement(EuiMutationObserver, {\n          observerOptions: {\n            subtree: true,\n            childList: true\n          },\n          onMutation: handleHeaderChange\n        }, function (ref) {\n          return React.createElement(EuiDataGridHeaderRow, {\n            ref: ref,\n            leadingControlColumns: leadingControlColumns,\n            trailingControlColumns: trailingControlColumns,\n            columns: orderedVisibleColumns,\n            columnWidths: columnWidths,\n            defaultColumnWidth: defaultColumnWidth,\n            setColumnWidth: setColumnWidth,\n            schema: mergedSchema,\n            sorting: sorting,\n            headerIsInteractive: headerIsInteractive,\n            focusedCell: focusedCell,\n            setFocusedCell: setFocusedCell\n          });\n        }), React.createElement(EuiDataGridBody, {\n          columnWidths: columnWidths,\n          defaultColumnWidth: defaultColumnWidth,\n          inMemoryValues: inMemoryValues,\n          inMemory: inMemory,\n          leadingControlColumns: leadingControlColumns,\n          trailingControlColumns: trailingControlColumns,\n          columns: orderedVisibleColumns,\n          schema: mergedSchema,\n          schemaDetectors: allSchemaDetectors,\n          popoverContents: popoverContents,\n          focusedCell: focusedCell,\n          onCellFocus: setFocusedCell,\n          pagination: pagination,\n          sorting: sorting,\n          renderCellValue: renderCellValue,\n          rowCount: rowCount,\n          interactiveCellId: interactiveCellId\n        }))));\n      }), props.pagination && props['aria-labelledby'] && React.createElement(\"p\", {\n        id: ariaLabelledBy,\n        hidden: true\n      }, ariaLabelledBy), renderPagination(props, gridId), React.createElement(\"p\", {\n        id: interactiveCellId,\n        hidden: true\n      }, React.createElement(EuiI18n, {\n        token: \"euiDataGrid.screenReaderNotice\",\n        default: \"Cell contains interactive content.\"\n      }))))));\n    });\n  });\n};\nEuiDataGrid.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"EuiDataGrid\"\n};"]},"metadata":{},"sourceType":"module"}